{% extends 'core/base.html' %}

{% block title %}PassGuard - Генератор паролей{% endblock %}

{% block content %}
<h2>Генератор паролей</h2>

<!-- Простая форма -->
<form method="POST">
    {% csrf_token %}

    <p>
        <label>Длина пароля:</label><br>
        <input type="number" name="length" value="{{ default_length|default:12 }}" min="8" max="32"
            style="width: 80px;">
    </p>

    <p>
        <strong>Какие символы использовать:</strong><br>
        <input type="checkbox" name="use_lowercase" id="l1" {% if use_lowercase|default:True %}checked{% endif %}>
        <label for="l1">Маленькие буквы (a-z)</label><br>

        <input type="checkbox" name="use_uppercase" id="l2" {% if use_uppercase|default:True %}checked{% endif %}>
        <label for="l2">Большие буквы (A-Z)</label><br>

        <input type="checkbox" name="use_digits" id="l3" {% if use_digits|default:True %}checked{% endif %}>
        <label for="l3">Цифры (0-9)</label><br>

        <input type="checkbox" name="use_special" id="l4" {% if use_special|default:True %}checked{% endif %}>
        <label for="l4">Спецсимволы (!@#$...)</label>
    </p>

    <button type="submit" class="btn btn-primary">Создать пароль</button>
</form>

{% if generated_password %}
<hr>

<h3>Ваш пароль:</h3>

<div style="background: #f8f9fa; padding: 15px; border: 1px solid #ddd; margin: 15px 0; font-family: monospace;">
    <strong>{{ generated_password }}</strong>
</div>

<button onclick="copyText()" class="btn btn-success">Копировать</button>
<a href="{% url 'core:check_strength' %}" class="btn btn-warning">Проверить сложность</a>
<a href="{% url 'core:check_leak' %}" class="btn btn-danger">Проверить на утечки</a>

<script>
    function copyText() {
        const text = "{{ generated_password }}";
        navigator.clipboard.writeText(text);
        alert('Скопировано!');
    }
</script>

{% endif %}
{% endblock %}